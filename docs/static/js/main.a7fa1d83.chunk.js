(this["webpackJsonpsweet-cake"]=this["webpackJsonpsweet-cake"]||[]).push([[0],{104:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){},109:function(e,t,c){},116:function(e,t,c){},117:function(e,t,c){},118:function(e,t,c){},119:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c.n(n),a=c(35),r=c.n(a),s=(c(89),c(12)),o=(c(90),c(20)),j=c(17),d=(c(91),c(92),c(130)),l=c(126),u=c(132),b=c(128),O=c(80),h=c(81),m=Object(n.createContext)(),p=(c(97),c(3));function x(){var e=Object(n.useContext)(m).products;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"container-cart-widget",children:[Object(p.jsx)(O.a,{icon:h.a}),e.length>0&&Object(p.jsx)("span",{class:"badge",children:e.length})]})})}var f=c.p+"static/media/logo-sweet-cake.8d59630b.png";function g(){return Object(p.jsx)(d.a,{collapseOnSelect:!0,expand:"lg",variant:"light",className:"style-nav",children:Object(p.jsxs)(l.a,{children:[Object(p.jsx)(d.a.Brand,{as:o.b,to:"/products",children:Object(p.jsx)("img",{src:f,width:"70",height:"70",className:"d-inline-block align-top",alt:"logo dulce pastel"})}),Object(p.jsx)(d.a.Brand,{className:"title-brand",children:"Dulce pastel"}),Object(p.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(p.jsx)(d.a.Collapse,{id:"responsive-navbar-nav",className:"justify-content-end",children:Object(p.jsxs)(u.a,{children:[Object(p.jsx)(u.a.Link,{as:o.b,to:"/products",children:"Tienda"}),Object(p.jsxs)(b.a,{title:"Categorias",id:"basic-nav-dropdown",children:[Object(p.jsx)(b.a.Item,{as:o.b,to:"/product-category/loveFriendship",children:"Amor y amistad"}),Object(p.jsx)(b.a.Item,{as:o.b,to:"/product-category/valentineDay",children:"San Valentin"}),Object(p.jsx)(b.a.Item,{as:o.b,to:"/product-category/films",children:"Peliculas"}),Object(p.jsx)(b.a.Item,{as:o.b,to:"/product-category/childish",children:"Infantil"})]}),Object(p.jsxs)(u.a.Link,{as:o.b,to:"/cart",children:[" ",Object(p.jsx)(x,{})," "]})]})})]})})}c(104);var v=c(29),y=c.n(v),k=c(4),N=c(39),T=c(68),C=c(131),w=c(133),S=c(83);c(106);function q(e){var t=e.stock,c=e.setCountDetail,i=void 0!==c&&c,a=Object(n.useState)(0),r=Object(s.a)(a,2),o=r[0],j=r[1];return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"section-count",children:[Object(p.jsx)(S.a,{variant:"primary",onClick:function(){return function(e){e>0&&(j(e-1),i&&i((function(t){return e-1})))}(o)},children:"-"}),Object(p.jsx)("span",{children:o}),Object(p.jsx)(S.a,{variant:"primary",onClick:function(){return function(e){e<t&&(j(e+1),i&&i((function(t){return e+1})))}(o)},children:"+"})]})})}c(107),c(108);function P(e){var t=e.summary;return Object(p.jsx)("div",{className:"container-summary",children:t})}function E(e){var t=e.id,c=e.img,i=e.title,a=e.price,r=e.summary,d=e.stock,l=e.quantity,u=void 0===l?0:l,b=e.quantityProducts,O=void 0!==b&&b,h=Object(j.h)(),x={id:t,img:c,title:i,price:a,summary:r,stock:d},f=Object(n.useContext)(m),g=f.products,v=f.setProducts,y=f.quantityTemp,k=f.setQuantityTemp,N=Object(n.useState)(!1),E=Object(s.a)(N,2),z=E[0],D=E[1],F=Object(n.useState)(0),I=Object(s.a)(F,2),A=I[0],B=I[1],G=function(e){var t=!1;return e.forEach((function(e){e.item.id===x.id&&(t=!0)})),t},J=function(e){return e.forEach((function(e){e.item.id===x.id&&(e.quantity+=A,$(x.id))})),e},$=function(e){y.forEach((function(t){t.id===e&&k([{id:e,quantityTemp:A+t.quantityTemp}])}))},_=function(){var e=d;return g.forEach((function(c){c.item.id===t&&(e=d-c.quantity)})),e},L=function(e){return e.forEach((function(c){if(c.item.id===x.id){var n=e.indexOf(c);e.splice(n,1),k([{id:t,quantityTemp:0}]),O()}})),e};return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(C.a,{style:{width:"20rem"},children:[Object(p.jsx)(C.a.Img,{onClick:function(){D(!z)},style:{height:"60%"},variant:"top",src:c}),z?Object(p.jsx)(P,{summary:r}):null,Object(p.jsxs)(C.a.Body,{children:[Object(p.jsxs)(C.a.Title,{children:[i," "]}),"/cart"!==h.pathname&&Object(p.jsx)("div",{children:Object(p.jsxs)(C.a.Title,{children:["Precio: $",a]})}),"/cart"===h.pathname&&Object(p.jsxs)("div",{children:[Object(p.jsxs)(C.a.Title,{children:[" Precio: $",a]}),Object(p.jsxs)(C.a.Title,{children:[" Precio total: $",a*u]}),Object(p.jsxs)(C.a.Title,{children:[" Unidades agregadas al carrito: ",u," "]})]}),"/cart"!==h.pathname&&Object(p.jsxs)(w.a,{variant:"flush",children:[Object(p.jsx)(q,{id:t,stock:_(),countDetail:A,setCountDetail:B}),Object(p.jsx)(S.a,{as:o.b,to:"/products-detail/".concat(t),variant:"primary",children:"Detalle del producto"})]})]}),Object(p.jsxs)(C.a.Footer,{className:"card-footer",children:["/cart"!==h.pathname&&A>0&&Object(p.jsx)(S.a,{style:{paddingRight:"10px"},variant:"primary",as:o.b,to:"/cart",onClick:function(){v((function(e){return G(e)?J(e):(k([{id:t,quantityTemp:A}]),[{item:x,quantity:A}].concat(Object(T.a)(e)))}))},children:"Agregar"}),"/cart"===h.pathname&&Object(p.jsx)(S.a,{style:{paddingRight:"10px"},variant:"primary",onClick:function(){v((function(e){return L(e)}))},children:"Eliminar"}),"/cart"===h.pathname?Object(p.jsxs)("div",{children:["Unidades disponibles ",d-u]}):Object(p.jsxs)("div",{children:["Unidades disponibles ",_()]})]})]})})}c(109);var z=c(53),D=(c(115),z.a.initializeApp({apiKey:"AIzaSyAwMo7Mb2pF1BdNdig_68rU6ygJaxJJmoM",authDomain:"sweet-cake-64247.firebaseapp.com",projectId:"sweet-cake-64247",storageBucket:"sweet-cake-64247.appspot.com",messagingSenderId:"441239627177",appId:"1:441239627177:web:da8c20c9384881945550b8"}),function(){return z.a.firestore()}),F=c(127);c(116);function I(e){e.loading;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"spinner",children:[Object(p.jsx)(F.a,{as:"span",animation:"border",size:"m",role:"status","aria-hidden":"true"}),Object(p.jsx)("span",{className:"loading",children:"Cargando..."})]})})}var A=function(e){e.loading;var t=Object(n.useState)(!1),c=Object(s.a)(t,2),i=c[0],a=c[1];return Object(n.useEffect)((function(){setTimeout((function(){a(!0)}),3e3)}),[]),Object(p.jsx)("div",{children:Object(p.jsx)(I,{loading:i})})};function B(e){var t=e.titleProduct,c=Object(j.g)(),i=Object(n.useState)([]),a=Object(s.a)(i,2),r=a[0],o=a[1],d=Object(n.useState)(!0),l=Object(s.a)(d,2),u=l[0],b=l[1];Object(n.useEffect)((function(){O()}),[]);var O=function(){var e=Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),t=D(),t.collection("products").get().then((function(e){0===e.size&&c.push("/error");var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));o(t)})).catch((function(e){console.log("Error searching products",e)})).finally((function(){b(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u?Object(p.jsx)(A,{}):Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"welcome",children:Object(p.jsx)("h1",{children:t})}),Object(p.jsx)("div",{className:"container-list",children:r.map((function(e){return Object(p.jsx)(E,{id:e.id,img:e.img,title:e.title,price:e.price,summary:e.summary,stock:e.stock},e.id)}))})]})}function G(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"container-item-list",children:Object(p.jsx)("div",{className:"list",children:Object(p.jsx)(B,{titleProduct:e.greeting})})})})}function J(){return Object(p.jsx)(G,{greeting:"Dulce Pastel deleitando paladares"})}var $={loveFriendship:{category:"Amor y amistad"},valentineDay:{category:"San valentin"},films:{category:"Peliculas"},childish:{category:"Infantil"}};c(117);function _(){var e=Object(j.h)(),t=Object(j.g)(),c=Object(j.i)().id,i=Object(n.useState)(""),a=Object(s.a)(i,2),r=a[0],o=a[1],d=Object(n.useState)([]),l=Object(s.a)(d,2),u=l[0],b=l[1],O=Object(n.useState)(["...Cargando"]),h=Object(s.a)(O,2),m=h[0],x=h[1],f=function(){var e=Object(N.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!0),n=D(),n.collection("products").where("category","==",c).get().then((function(e){0===e.size&&t.push("/error");var c=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));o($[c[0].category]),b(c)})).catch((function(e){console.log("Error searching products",e)})).finally((function(){x(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[e]),m?Object(p.jsx)(A,{}):Object(p.jsx)("div",{className:"list",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"title-category",children:Object(p.jsxs)("h1",{children:["Categoria ",r.category," "]})}),Object(p.jsx)("div",{className:"container-list",children:u.map((function(e){return Object(p.jsx)(E,{id:e.id,img:e.img,title:e.title,price:e.price,summary:e.summary,stock:e.stock},e.id)}))})]})})}function L(){return Object(p.jsx)(_,{})}c(118);function M(){var e=Object(j.g)(),t=Object(j.i)().id,c=Object(n.useContext)(m),i=c.products,a=c.setProducts,r=c.quantityTemp,d=c.setQuantityTemp,l=Object(n.useState)({}),u=Object(s.a)(l,2),b=u[0],O=u[1],h=Object(n.useState)(!0),x=Object(s.a)(h,2),f=x[0],g=x[1],v=Object(n.useState)(0),C=Object(s.a)(v,2),w=C[0],P=C[1],E=function(){var c=Object(N.a)(y.a.mark((function c(){var n;return y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:g(!0),n=D(),n.collection("products").doc(t).get().then((function(c){c.exists||e.push("/error"),O(Object(k.a)({id:t},c.data()))})).catch((function(e){console.log("Error searching product",e)})).finally((function(){g(!1)}));case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();if(Object(n.useEffect)((function(){E()}),[]),f)return Object(p.jsx)(A,{});var z=function(e){var t=!1;return e.forEach((function(e){e.item.id===b.id&&(t=!0)})),t},F=function(e){return e.forEach((function(e){e.item.id===b.id&&(e.quantity+=w,function(e){r.forEach((function(t){t.id===e&&d([{id:e,quantityTemp:w+t.quantityTemp}])}))}(b.id))})),e};return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"title-detail",children:Object(p.jsx)("h1",{children:"Detalle del producto"})}),Object(p.jsxs)("div",{className:"container-list-detail",children:[Object(p.jsx)("div",{className:"img-detail",children:Object(p.jsx)("img",{src:b.img,alt:b.id})}),Object(p.jsxs)("div",{className:"detail",children:[Object(p.jsx)("h1",{children:b.title},b.id),Object(p.jsx)("p",{children:b.summary}),Object(p.jsxs)("h3",{children:["Precio: $",b.price]}),Object(p.jsxs)("h3",{children:["Precio total: $",function(){var e=b.price;return i.forEach((function(c){c.item.id===t&&(e=b.price*c.quantity)})),e}()]}),Object(p.jsxs)("h4",{children:["Pasteles disponibles: ",function(){var e=b.stock;return i.forEach((function(c){c.item.id===t&&(e=b.stock-c.quantity)})),e}()]}),Object(p.jsx)("div",{className:"quantity-size",children:Object(p.jsx)(q,{stock:b.stock,setCountDetail:P})}),w>0?Object(p.jsx)(S.a,{variant:"primary",as:o.b,to:"/cart",onClick:function(){a((function(e){return z(e)?F(e):(d([{id:t,quantityTemp:w}]),[{item:b,quantity:w}].concat(Object(T.a)(e)))}))},children:"Agregar al carrito"}):null]})]})]})}function U(){return Object(p.jsx)(M,{})}c(119);function Q(){return Object(p.jsx)("div",{className:"error",children:Object(p.jsxs)("div",{className:"error__container",children:[Object(p.jsx)("h2",{className:"error__container--title",children:"404"}),Object(p.jsx)("p",{children:"P\xe1gina no encontrada"}),Object(p.jsx)(o.b,{to:"/",children:"Volver"})]})})}var R=c(16),V=c(129),H=c(134),K=c(135);c(120);function W(){var e=Object(n.useContext)(m).products,t=Object(n.useState)(),c=Object(s.a)(t,2)[1],i=Object(n.useCallback)((function(){return c({})}),[]),a=Object(n.useState)(!1),r=Object(s.a)(a,2),o=r[0],j=r[1],d=Object(n.useState)({name:"",phone:"",email:""}),l=Object(s.a)(d,2),u=l[0],b=l[1],O=Object(n.useState)(""),h=Object(s.a)(O,2),x=h[0],f=h[1],g=function(){i()},v=function(){b({name:"",phone:"",email:""}),f(""),j(!1)},T=function(){var t=Object(N.a)(y.a.mark((function t(){var c,n,i,a,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=D(),n=c.collection("orders"),i=e.map((function(e){return e.item})),a={buyer:u,items:i,date:z.a.firestore.Timestamp.fromDate(new Date),total:C()},t.next=6,n.add(a);case 6:r=t.sent,f(r.id);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=0;return e.forEach((function(e){t+=e.item.price*e.quantity})),t},w=function(e,t){b(Object(k.a)(Object(k.a)({},u),{},Object(R.a)({},t,e)))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"container-item-list",children:Object(p.jsx)("div",{className:"list",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"title-category",children:Object(p.jsx)("h1",{children:" Tu compra "})}),0===e.length&&Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Aun no has agregado productos al carrito"}),Object(p.jsx)("a",{className:"add-products",href:"/products",children:"Ver productos"})]}),Object(p.jsx)("div",{className:"container-list",children:e.map((function(e){return Object(p.jsx)(E,{id:e.item.id,img:e.item.img,title:e.item.title,price:e.item.price,summary:e.item.summary,stock:e.item.stock,quantity:e.quantity,quantityProducts:g},e.item.id)}))}),0!==e.length&&Object(p.jsx)("div",{children:Object(p.jsx)(S.a,{variant:"primary",onClick:function(){return j(!0)},children:"Realizar la compra"})})]})})}),Object(p.jsxs)(V.a,{show:o,onHide:v,animation:!1,children:[Object(p.jsx)(V.a.Header,{closeButton:!0,children:Object(p.jsx)(V.a.Title,{children:"Datos del comprador"})}),Object(p.jsxs)(V.a.Body,{children:[Object(p.jsx)("h6",{children:"Todos los campos son obligatorios"}),Object(p.jsx)("br",{}),Object(p.jsxs)(H.a,{size:"lg",children:[Object(p.jsx)(H.a.Text,{id:"inputGroup-sizing-lg",children:"* Nombre"}),Object(p.jsx)(K.a,{id:"name","aria-label":"name","aria-describedby":"inputGroup-sizing-sm",value:u.name,onChange:function(e){return w(e.target.value,"name")}})]}),Object(p.jsx)("br",{}),Object(p.jsxs)(H.a,{size:"lg",children:[Object(p.jsx)(H.a.Text,{id:"inputGroup-sizing-lg",children:"* Telefono"}),Object(p.jsx)(K.a,{id:"phone","aria-label":"phone","aria-describedby":"inputGroup-sizing-sm",value:u.phone,onChange:function(e){return w(e.target.value,"phone")}})]}),Object(p.jsx)("br",{}),Object(p.jsxs)(H.a,{size:"lg",children:[Object(p.jsx)(H.a.Text,{id:"inputGroup-sizing-lg",children:"* Correo"}),Object(p.jsx)(K.a,{id:"email","aria-label":"email","aria-describedby":"inputGroup-sizing-sm",value:u.email,onChange:function(e){return w(e.target.value,"email")}})]})]}),""!==x?Object(p.jsx)("div",{className:"product-buy",children:Object(p.jsxs)("h6",{children:["\xa1Gracias por comprar en Dulce Paste, su orden de compra es: ",x,"!"]})}):Object(p.jsx)("div",{className:"total-buy",children:Object(p.jsxs)("strong",{children:["Total a pagar: ",C()]})}),Object(p.jsxs)(V.a.Footer,{children:[Object(p.jsx)(S.a,{variant:"secondary",onClick:v,children:"Cerrar"}),Object(p.jsx)(S.a,{variant:"primary",onClick:T,children:"Finalizar compra"})]})]})]})}function X(){return Object(p.jsx)(W,{})}function Y(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),c=t[0],i=t[1],a=Object(n.useState)([]),r=Object(s.a)(a,2),d=r[0],l=r[1];return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(m.Provider,{value:{products:c,setProducts:i,quantityTemp:d,setQuantityTemp:l},children:Object(p.jsxs)(o.a,{basename:"/sweet-cake",children:[Object(p.jsx)(g,{}),Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/",children:Object(p.jsx)(J,{})}),Object(p.jsx)(j.b,{exact:!0,path:"/products",children:Object(p.jsx)(J,{})}),Object(p.jsx)(j.b,{exact:!0,path:"/products-detail/:id",children:Object(p.jsx)(U,{})}),Object(p.jsx)(j.b,{exact:!0,path:"/product-category/:id",children:Object(p.jsx)(L,{})}),Object(p.jsx)(j.b,{exact:!0,path:"/cart",children:Object(p.jsx)(X,{})}),Object(p.jsx)(j.b,{path:"/error",exact:!0,component:Q}),Object(p.jsx)(j.a,{from:"*",to:"/error"})]})]})})})}var Z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,136)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),i(e),a(e),r(e)}))};r.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(Y,{})}),document.getElementById("root")),Z()},89:function(e,t,c){},90:function(e,t,c){},92:function(e,t,c){},97:function(e,t,c){}},[[121,1,2]]]);
//# sourceMappingURL=main.a7fa1d83.chunk.js.map